## evaluating bayesian mortality and recruitment models generated by running the "bayes_models.R" script

library(brms)
library(bayesplot)
library(tidybayes)
library(openair)

# subalpine fir mortality model

## checking R-hats ; all = 1.00
summary(m19)

## checking posterior prediction distribution against data ; looks good
m19pp <- posterior_predict(m19, ndraws=200)
ppc_dens_overlay(y = m19$data$SURV,
                 yrep = m19pp, 
                 size = 2,
                 alpha = 0.5) +
  xlim(0,1)
  
## Taylor diagram
openair::TaylorDiagram(mydata = m19$data %>% 
                         bind_cols(as.data.frame(fitted(m19))),
                       obs = "SURV",
                       mod="Estimate",
                       type="ECOSUBCD",
                       #group = "ECOSUBCD",
                       normalise = T)

